1、客户端安装
 yum install rsync
 vi /etc/rsyncd.conf
内容：
lock file = /var/run/rsync.lock
log file = /var/log/rsyncd.log
pid file = /var/run/rsyncd.pid
[live]
path =/data/live.uuu9.com 
comment = special offer image files
uid = root
gid = root
read only = no
list = yes
auth users = rsyncclient
secrets file = /etc/rsyncd.secrets
hosts allow = 10.172.180.150 

echo rsyncclient:P52f17dm440bso4z >/etc/rsyncd.secrets
rsyncclient:P52f17dm440bso4z
chmod 600 /etc/rsyncd.secrets


/usr/bin/rsync --daemon
2、服务端
yum install rsync lsyncd
vi /etc/lsyncd.conf
内容：
settings {
    logfile = "/var/log/lsyncd/lsyncd.log",
    statusFile = "/var/log/lsyncd/lsyncd-status.log",
    statusInterval = 10
}
--------------------------------
-- sync files to product server
-------------------------------
sync {
    default.rsync,
    source="/data/live.uuu9.com",
    target="rsyncclient@10.173.33.197::live",
    delete = true,-- Doesn't delete files on the remote host eventho they're deleted at the source. This might be beneficial for some not for others
    delay = 1, -- We want to delay the syncing for 5 seconds so we queue up the events
    maxProcesses = 4, -- We only want to use a maximum of 4 rsync processes at same time
    rsync = {
        password_file = "/etc/rsyncd.secrets_master",
        compress = true,
        acls = true,
        verbose = true,
        owner = true,
        group = true,
        perms = true
    }
}
sync {
    default.rsync,
    source="/data/live.uuu9.com",
    target="rsyncclient@10.171.59.179::live",
    delete = true,-- Doesn't delete files on the remote host eventho they're deleted at the source. This might be beneficial for some not for others
    delay = 1, -- We want to delay the syncing for 5 seconds so we queue up the events
    maxProcesses = 4, -- We only want to use a maximum of 4 rsync processes at same time
    rsync = {
        password_file = "/etc/rsyncd.secrets_master",
        compress = true,
        acls = true,
        verbose = true,
        owner = true,
        group = true,
        perms = true
    }
}



vi /etc/rsyncd.secrets_master
P52f17dm440bso4z
chmod 600  /etc/rsyncd.secrets_master
  

service lsyncd start
tail -f /var/log/lsyncd/lsyncd.log

   